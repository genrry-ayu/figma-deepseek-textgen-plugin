# 文案生成助手 - Figma 插件

一个基于 DeepSeek 大语言模型的 Figma 插件，帮助设计师快速生成界面文案，提升设计效率。

## ✨ 功能特性

- **智能文案生成**：基于 DeepSeek 模型，根据自然语言描述生成高质量中文文案
- **批量生成优化**：一次API调用生成所有文案，大幅提升性能，减少等待时间
- **独立文案生成**：多选图层时，每个图层生成独立的文案，避免重复内容
- **精准输出**：确保生成的文案精准无误，不包含额外信息或解释
- **多帧同步**：智能匹配多个Frame中的文本节点，实现批量文本同步
- **智能匹配**：支持同名优先和相对位置匹配，确保同步准确性
- **实时预览**：文案直接填入 Figma 画布，所见即所得
- **智能存储**：API Key 自动保存到本地，无需重复输入，提升用户体验
- **安全保护**：API Key 仅保存在本地 Figma 客户端，保护用户隐私
- **错误处理**：完善的错误提示和异常处理机制

## 🚀 快速开始

### 1. 安装插件

1. 下载插件文件到本地
2. 在 Figma 中打开「插件」菜单
3. 选择「开发」→「导入插件」
4. 选择 `manifest.json` 文件

### 2. 配置 API Key

1. 打开插件面板
2. 点击「🔑 API 配置」展开配置区域
3. 输入您的 DeepSeek API Key
4. 点击「保存配置」

> **获取 API Key**：访问 [DeepSeek Platform](https://platform.deepseek.com/api_keys) 创建 API Key
> 
> **自动保存**：API Key 会自动保存到本地，下次打开插件时会自动加载，无需重复输入

### 3. 使用插件

#### 文案生成功能
1. 在 Figma 画布中选择一个或多个文本图层
2. 在插件面板的「文案需求描述」中输入您的需求
3. 点击「生成文案」按钮
4. 等待 AI 生成并自动填入文案

#### 多帧同步功能
1. 在 Figma 画布中选择至少2个Frame
2. 切换到「多帧同步」选项卡
3. 调整匹配阈值（默认0.08）
4. 选择是否同步基准帧
5. 点击「开始同步」按钮

## 📝 使用示例

### 快递单号生成
```
输入：快递单号
输出：SF123456789、YT987654321、JD456789123
```

### 公司名称生成
```
输入：公司名称
输出：
图层1：创新科技有限公司
图层2：智慧生活服务有限公司
图层3：绿色能源科技股份有限公司
```

### 产品名称生成
```
输入：产品名称
输出：智能手环、无线充电器、高清摄像头
```

### 按钮文案生成
```
输入：按钮文案
输出：立即购买、马上抢购、加入购物车
```

### 标题文案生成
```
输入：标题文案
输出：创新科技引领未来、智能生活从这里开始
```

### 参考格式生成
```
输入：参考：P0\P1
输出：
图层1：P0
图层2：P1
图层3：P2
```

### 自定义格式生成
```
输入：参考：A1\A2 生成产品编号
输出：
图层1：A1
图层2：A2
图层3：A3
```

### 多帧同步示例
```
场景：3个相同结构的Frame，每个包含10个文本节点
操作：选择3个Frame → 切换到多帧同步 → 点击开始同步
结果：匹配 30 处，成功写入 28，未匹配 2
说明：自动跳过锁定的文本节点，智能匹配同名和位置相近的文本
```

## 🛠️ 技术架构

### 文件结构
```
├── manifest.json          # 插件配置文件
├── code.js               # 插件主逻辑
├── ui.html              # 插件界面
└── README.md            # 说明文档
```

### 核心功能

1. **文本检测**：自动识别选中的文本图层
2. **批量生成**：一次API调用生成所有文案，提升性能
3. **智能解析**：自动解析批量文案并分配到对应图层
4. **API 调用**：集成 DeepSeek Chat 模型
5. **字体处理**：自动加载所需字体，确保文本正确显示
6. **错误处理**：网络异常、API 错误等情况的友好提示

## 🔧 开发说明

### 环境要求
- Figma Desktop 或 Web 版本
- 现代浏览器支持
- DeepSeek API Key

### 本地开发
1. 克隆项目到本地
2. 在 Figma 中导入插件
3. 修改代码后重新加载插件

### API 配置
插件默认使用 DeepSeek Chat 模型，您可以在 `code.js` 中修改：
- 模型版本
- 生成参数（temperature、max_tokens 等）
- 系统提示词

## 📋 版本历史

### v1.0.0 (当前版本)
- ✅ 基础文案生成功能
- ✅ 多图层批量操作
- ✅ API Key 本地存储
- ✅ 完善的错误处理
- ✅ 响应式 UI 设计

### 计划功能 (v2.0)
- 🔄 支持多种 LLM 提供商
- 🔄 文案模板库
- 🔄 多语言支持
- 🔄 历史记录功能

## ⚠️ 注意事项

1. **API 费用**：使用 DeepSeek API 会产生费用，请合理使用
2. **网络要求**：需要稳定的网络连接访问 DeepSeek API
3. **隐私保护**：API Key 仅存储在本地，不会上传到任何服务器
4. **字体兼容**：确保 Figma 中有所需字体，否则可能显示异常

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request 来改进这个插件！

### 贡献方式
1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 发起 Pull Request

## 📄 许可证

MIT License - 详见 LICENSE 文件

## 🆘 支持与反馈

如果您在使用过程中遇到问题或有改进建议，请：
1. 查看本文档的常见问题部分
2. 在 GitHub 上提交 Issue
3. 联系开发者

---

**享受更高效的设计工作流程！** 🎨✨
